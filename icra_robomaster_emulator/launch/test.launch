<launch>
    <!-- these are the arguments you can pass this launch file, for example gui:=true -->
    <arg name="paused" default="false"/>
    <arg name="use_sim_time" default="true"/>
    <arg name="gui" default="true"/>
    <arg name="headless" default="false"/>
    <arg name="debug" default="false"/>
    <arg name="map" value="RMUA"/>

   <!-- launch the transform node -->
    <include file="$(find icra_robomaster_emulator)/launch/transform_red1.launch"/>

    <!-- 启动rviz -->
    <node pkg="rviz" type="rviz" name="rviz" args="-d $(find icra_robomaster_emulator)/rviz/red1.rviz"/>


   <group ns="red1">

    	 <param name="tf_prefix" value="red1"/>
   	 <rosparam command="load" file="$(find roborts_localization)/config/localization.yaml" />
   	 <rosparam command="load" file="$(find roborts_localization)/amcl/config/amcl.yaml" />

   	 <!-- Run the map server -->
   	 <node name="map_server" pkg="map_server" type="map_server" args="$(find icra_robomaster_emulator)/map/$(arg map).yaml" respawn="false"  />


	<param name="robot_description"
		       command="$(find xacro)/xacro --inorder '$(find icra_robomaster_emulator)/robots/infantry_test_red1.xacro' ns:=red1"/>


   	 <!-- 发布静态TF -->
   	 <node name="tf_footprint_base" pkg="tf" type="static_transform_publisher"
              args="0 0 0 0 0 0 base_footprint  red1/reverse_base_link 40"/>


	



  	<!-- Run the global planner node -->
  	<node pkg="roborts_planning" type="global_planner_node" name="global_planner_node" respawn="false" />

	<!-- Run the local planner node -->
  	<!--node pkg="roborts_planning" type="local_planner_node" name="local_planner_node" respawn="false" /-->

  	<!-- Run the local planner node -->
 	 <node pkg="roborts_planning" type="local_planner_node" name="local_planner_node" respawn="false" />

	<!-- Run the velocity converter node -->
  	<node pkg="roborts_planning" type="vel_converter" name="vel_converter_node" respawn="false" >
		<remap from="/red1/cmd_vel"          to="/jackal0/cmd_vel"/>
	</node>

	<!-- Run the localization node -->
  	<node pkg="roborts_localization" type="localization_node" name="localization_node" respawn="false" />



    </group>

  	<include file="$(find rf2o_laser_odometry)/launch/rf2o_laser_odometry.launch"/>



</launch>
